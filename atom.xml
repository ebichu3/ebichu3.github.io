<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ebichu&#39;s Blog</title>
  <icon>https://www.gravatar.com/avatar/127286bc8e81892d9ae50c2eec0af3ff</icon>
  <subtitle>to be continued...</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ebichu3.github.io/"/>
  <updated>2019-07-24T05:52:42.993Z</updated>
  <id>https://ebichu3.github.io/</id>
  
  <author>
    <name>ebichu</name>
    <email>731550187@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>由一个SQL问题引发的：WM_CONCAT、LISTAGG的用法</title>
    <link href="https://ebichu3.github.io/2019/07/23/%E4%B8%80%E4%B8%AASQL%E9%97%AE%E9%A2%98%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83%EF%BC%9AWM_CONCAT%E3%80%81LISTAGGRANK%E3%80%81DENSE_RANK%E7%9A%84%E7%94%A8%E6%B3%95/"/>
    <id>https://ebichu3.github.io/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/</id>
    <published>2019-07-23T12:11:00.000Z</published>
    <updated>2019-07-24T05:52:42.993Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>详细数据如图一，含义为名字为甲乙丙的三人不限次数任意参加python、c++、java考试，得到的分数等级在第三列。</p><p>现需要筛选出只参过一种考试的人名和科目，结果应如图二。在oracle下SQL该如何写？</p><p><img src="/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/1.png" alt=""></p><p>图一</p><p><img src="/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/2.png" alt=""></p><p>图二</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> temp_table (<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>), course <span class="built_in">varchar</span>(<span class="number">255</span>), score <span class="built_in">varchar</span>(<span class="number">255</span>));</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'甲'</span>, <span class="string">'python'</span>, <span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'甲'</span>, <span class="string">'python'</span>, <span class="string">'b'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'甲'</span>, <span class="string">'python'</span>, <span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'乙'</span>, <span class="string">'python'</span>, <span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'乙'</span>, <span class="string">'c++'</span>, <span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'丙'</span>, <span class="string">'python'</span>, <span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'丙'</span>, <span class="string">'java'</span>, <span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'丙'</span>, <span class="string">'java'</span>, <span class="string">'b'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp_table <span class="keyword">VALUES</span> (<span class="string">'丙'</span>, <span class="string">'java'</span>, <span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> temp_table;</span><br></pre></td></tr></table></figure><p>思路一：首先在name、course两列做去重处理。然后以name做分组，过滤出统计数量为一的记录。最后在进行关联得到name、course两列。</p><p>A1:最后关联的步骤使用join连接的方式。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">DISTINCT</span> t.name,</span><br><span class="line">tt.course</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">(<span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">name</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">name</span>, course </span><br><span class="line"><span class="keyword">FROM</span> TEMP_TABLE</span><br><span class="line">) </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">count</span>(<span class="number">1</span>) = <span class="number">1</span>) t </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> TEMP_TABLE tt <span class="keyword">ON</span> t.name = tt.name</span><br></pre></td></tr></table></figure></p><p>A2:感觉A1的方式有点啰嗦，所以最后的步骤使用的嵌套子查询。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">t.name,</span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> course <span class="keyword">FROM</span> TEMP_TABLE <span class="keyword">WHERE</span> <span class="keyword">name</span> = t.name) course</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">DISTINCT</span> <span class="keyword">name</span>, </span><br><span class="line">course</span><br><span class="line"><span class="keyword">FROM</span> TEMP_TABLE) t</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.name</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">count</span>(<span class="number">1</span>) = <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>觉得思路一总的来看还是有点啰嗦，故发给小伙伴们讨论更优解。思路二就是来自小伙伴的想法。</p><p>思路二：首先使用函数把name相同的course列以特殊字符拼接在一行中，然后在此基础上过滤出没有特殊字符的记录。</p><p>A3:使用WM_CONCAT函数，可以在函数中直接做去重处理。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">name</span>,</span><br><span class="line">course</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, WM_CONCAT(<span class="keyword">DISTINCT</span> course) course </span><br><span class="line"><span class="keyword">FROM</span> TEMP_TABLE t </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.name</span><br><span class="line">) </span><br><span class="line"><span class="keyword">WHERE</span> course <span class="keyword">NOT</span> <span class="keyword">LIKE</span>  <span class="string">'%,%'</span></span><br></pre></td></tr></table></figure></p><p>A4:使用LISTAGG函数，要提前做去重处理再使用函数。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">name</span>,</span><br><span class="line">course</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> t.name, <span class="keyword">LISTAGG</span>(t.course, <span class="string">';'</span>) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> t.name, t.course) course</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">name</span>, course </span><br><span class="line"><span class="keyword">FROM</span> TEMP_TABLE</span><br><span class="line">) t </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.name</span><br><span class="line">) </span><br><span class="line"><span class="keyword">WHERE</span> course <span class="keyword">NOT</span> <span class="keyword">LIKE</span>  <span class="string">'%;%'</span></span><br></pre></td></tr></table></figure></p><h6 id="总结：WM-CONCAT、LISTAGG的用法"><a href="#总结：WM-CONCAT、LISTAGG的用法" class="headerlink" title="总结：WM_CONCAT、LISTAGG的用法"></a>总结：WM_CONCAT、LISTAGG的用法</h6><ul><li>WM_CONCAT不出现在12c中，所以不建议使用这个函数。但是还是列出了它的不同用法。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">name</span>, </span><br><span class="line">WM_CONCAT(course) course </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">TEMP_TABLE t </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.name</span><br></pre></td></tr></table></figure><p><img src="/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/3.png" alt=""></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">name</span>, </span><br><span class="line">WM_CONCAT(<span class="keyword">DISTINCT</span> course) course </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">TEMP_TABLE t </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.name</span><br></pre></td></tr></table></figure><p><img src="/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/4.png" alt=""></p><ul><li>LISTAGG在11.2版本之后可以使用。</li></ul><p><img src="/2019/07/23/一个SQL问题引发的思考：WM_CONCAT、LISTAGGRANK、DENSE_RANK的用法/5.png" alt=""></p><p>对于指定的列，<code>LISTAGG</code>对子<code>ORDER</code> <code>BY</code>句中指定的每个组内的数据进行排序，然后连接列的值。</p><ul><li>作为单集聚合函数，<code>LISTAGG</code>对所有行进行操作并返回单个输出行。</li><li>作为一个组集聚合，该函数操作并返回该<code>GROUP</code> <code>BY</code>子句定义的每个组的输出行。</li><li>作为分析函数，<code>LISTAGG</code>根据中的一个或多个表达式将查询结果集划分为组<code>query_partition_clause</code>。</li></ul><p>函数的参数遵循以下规则：</p><ul><li><code>measure_expr</code>可以是任何列。度量列中的空值将被忽略。</li><li><code>delimiter_expr</code>指定是分开测量的值的字符串。该子句是可选的，默认为<code>NULL</code>。</li><li>在<code>order_by_clause</code>决定了被返回连接值的顺序。仅当<code>ORDER</code> <code>BY</code>列列表实现唯一排序时，该功能才是确定性的。</li></ul><p>如果列是<code>RAW</code>类型，返回数据类型是<code>RAW</code>，否则返回值是<code>VARCHAR2</code>类型。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="SQL" scheme="https://ebichu3.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>WEEK一：数据的描述性统计</title>
    <link href="https://ebichu3.github.io/2019/07/20/WEEK%E4%B8%80%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1/"/>
    <id>https://ebichu3.github.io/2019/07/20/WEEK一：数据的描述性统计/</id>
    <published>2019-07-20T03:11:00.000Z</published>
    <updated>2019-07-23T05:54:27.736Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这周时间比较紧张，加上本身工作不太涉及到数据内容的分析描述，所以文章内容主要是知识点的罗列。基本都是从《面向数据科学家的实用统计学》一书中获得。</p><h5 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h5><p>结构化数据有两种基本类型，即数值型数据和分类数据。包括连续型数据、离散型数据、分类数据（其中包括二进制数据）和有序数据。</p><ul><li><p>连续型数据 数据可在一个区间内取任何值。<br>同义词：区间数据、浮点型数据、数值数据</p></li><li><p>离散型数据 数据只能取整数，例如计数。<br>同义词：整数型数据、计数型数据</p></li><li><p>分类型数据 数据只能从特定集合中取值，表示一系列可能的分类。<br>同义词：枚举数据、列举数据、因子数据、标称数据、多分支数据</p></li><li><p>二元数据 一种特殊的分类数据，数据值只能从两个值中取其一（例如 0 或 1，True 或 False）。<br>同义词：二分数据、逻辑型数据、指示器数据、布尔型数据</p></li><li><p>有序数据 具有明确排序的分类数据。<br>同义词：有序因子数据</p></li></ul><h5 id="位置估计"><a href="#位置估计" class="headerlink" title="位置估计"></a>位置估计</h5><p>变量表示了测量数据或计数数据，一个变量的取值可能会数以千计。探索数据的一个基本步骤，就是获得每个特征（变量）的“典型值”。典型值是对数据最常出现位置的估计， 即数据的集中趋势。</p><ul><li>众数 指数据中出现最频繁的一个或一组数值。</li><li>均值 所有数据值之和除以数值的个数。<br>同义词：平均值</li><li>切尾均值 在数据集剔除一定数量的极值后，再求均值。<br>同义词：截尾均值</li><li>加权均值 各数值乘以相应的权重值，然后加总求和，再除以权重的总和。<br>同义词：加权平均值</li><li>中位数 使得数据集中分别有一半数据位于该值之上和之下。<br>同义词：第 50 百分位数</li><li>加权中位数 使得排序数据集中分别有一半的权重之和位于该值之上和之下。</li><li>稳健 对极值不敏感。<br>同义词：耐抗性</li><li>离群值 与大部分数据值差异很大的数据值。<br>同义词：极值</li></ul><p>均值是一种基本的位置度量，但是对极值（离群值）敏感。其他一些度量更为稳健，例如中位数和切尾均值。</p><h5 id="变异性"><a href="#变异性" class="headerlink" title="变异性"></a>变异性</h5><p>位置只是总结特性的一个维度，另一个维度是变异性（variability），也称离差（dispersion）， 它测量了数据值是紧密聚集的还是发散的。变异性是统计学的一个核心概念，统计学关注 如何测量变异性，如何降低变异性，如何识别真实变异性中的随机性，如何识别真实变异 性的各种来源，以及如何在存在变异性的情况下做出决策。</p><ul><li><p>偏差 位置的观测值与估计值间的直接差异。<br>同义词：误差、残差</p></li><li><p>方差 对于 n 个数据值，方差是对距离均值的偏差平方后求和，再除以 n-1。<br>同义词：均方误差</p></li><li><p>标准偏差 方差的平方根。<br>同义词： L2 范数、欧几里得范数</p></li><li><p>平均绝对偏差 对数据值与均值间偏差的绝对值计算均值。<br>同义词：L1 范数、曼哈顿范数</p></li><li><p>中位数绝对偏差 数据值与中位数间绝对偏差的均值。</p></li><li><p>极差 数据集中最大值和最小值间的差值。</p></li><li><p>顺序统计量 基于从大到小排序的数据值的度量。<br>同义词：秩</p></li><li><p>百分位数 表示一个数据集中，P% 的值小于或等于第 P 百分位数，(100-P)% 的值大于或等 于第 P 百分位数。<br>同义词：四分位数</p></li><li><p>四分位距 第 75 百分位数和第 25 百分位数间的差值。<br>同义词：四分位差</p></li></ul><p>方差和标准偏差是日常最广为使用的变异性统计量。方差和标准偏差都对离群值敏感。更稳健的度量包括偏离均值（百分位数、四分位距）的平均（中位数）绝对偏差。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="DATA SCIENCE" scheme="https://ebichu3.github.io/tags/DATA-SCIENCE/"/>
    
  </entry>
  
  <entry>
    <title>Spoon用户指南：01Spoon简介</title>
    <link href="https://ebichu3.github.io/2019/03/12/Spoon%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97%EF%BC%9A01Spoon%E7%AE%80%E4%BB%8B/"/>
    <id>https://ebichu3.github.io/2019/03/12/Spoon用户指南：01Spoon简介/</id>
    <published>2019-03-12T11:31:00.000Z</published>
    <updated>2019-07-30T02:45:57.022Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>什么是Spoon？</strong></p><p>Kettle是“Kettle E.T.T.L. Environment.”的首字母缩写。Kettle旨在帮助您满足您的ETTL需求，包括数据的提取，转换，运输和加载。</p><p>Spoon是一个图形用户界面，允许您设计可以使用Kettle工具–Pan和Kitchen运行的转换和作业。Pan是一种数据转换引擎，可执行多种功能，例如从各种数据源读取，操作和写入数据。Kitchen是一个程序，用于执行由Spoon在XML或数据库资源库中设计的作业。作业通常以批处理模式安排，以定期自动运行。</p><blockquote><p><strong>注意</strong>：有关Pan或Kitchen的完整说明，请参阅Pan和Kitchen用户指南。</p></blockquote><p>转换和作业可以使用XML文件描述自己，也可以放在Kettle数据库资源库中。然后，Pan或Kitchen可以读取数据以执行转换中描述的步骤或运行作业。总之，Pentaho Data Integration使数据仓库更易于构建，更新和维护。</p><p>本节介绍以下主题：</p><ul><li>安装 Spoon</li><li>启动 Spoon</li><li>支持的平台</li><li>已知的问题</li><li>用户界面概述</li><li>命令行选项</li><li>资源库</li><li>许可证</li><li>转换定义</li><li>作业定义</li><li>工具栏图标</li><li>Spoon 选项</li><li>搜索元数据</li><li>设置环境变量</li><li>执行日志历史记录</li><li>重新执行</li><li>生成针对目标步骤的映射</li><li>安全模式</li><li>欢迎界面</li></ul><h2 id="安装Spoon"><a href="#安装Spoon" class="headerlink" title="安装Spoon"></a>安装Spoon</h2><p>按照以下说明安装Spoon：</p><ol><li>安装Sun Microsystems Java Runtime Environment 1.5或更高版本。您可以在<a href="http://www.javasoft.com/" target="_blank" rel="noopener">http://www.javasoft.com/</a>免费下载JRE 。</li><li>将二进制分发zip文件解压缩到您选择的目录中。</li><li>在类Unix环境（例如Solaris，Linux，MacOS）下，必须使shell脚本可执行。执行这些命令以使Kettle目录中的所有shell脚本都可执行：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Kettle</span><br><span class="line">chmod +x *.sh</span><br></pre></td></tr></table></figure><h2 id="启动Spoon"><a href="#启动Spoon" class="headerlink" title="启动Spoon"></a>启动Spoon</h2><p>下面的脚本允许您在不同平台上启动Spoon：</p><ul><li><strong>Spoon.bat：</strong>在Windows平台上启动Spoon。</li><li><strong>spoon.sh：</strong>在类似Unix的平台上启动Spoon，例如Linux，Apple OSX，Solaris</li></ul><p>要在Windows平台下创建快捷方式，需要提供一个图标。使用“spoon.ico”设置正确的图标。将快捷方式指向spoon.bat文件。</p><h2 id="支持的平台"><a href="#支持的平台" class="headerlink" title="支持的平台"></a>支持的平台</h2><p>以下平台支持Spoon GUI：</p><ul><li>Microsoft Windows：自Windows 95以来的所有平台，包括Vista</li><li>Linux GTK：在i386和x86_64处理器上，最适合Gnome</li><li>Apple的OSX：适用于PowerPC和Intel机器</li><li>Solaris：使用Motif接口（GTK可选）</li><li>AIX：使用Motif接口</li><li>HP-UX：使用Motif界面（GTK可选）</li><li>FreeBSD：对i386的初步支持，尚未在x86_64上</li></ul><h2 id="已知的问题"><a href="#已知的问题" class="headerlink" title="已知的问题"></a>已知的问题</h2><p>以下是与Spoon相关的已知问题列表。</p><p><strong>Linux</strong><br>偶尔的JVM崩溃运行SuSE Linux和KDE。在Gnome下运行没有任何问题。（在SUSE Linux 10.1上检测到但早期版本也存在同样的问题）</p><p><strong>FreeBSD</strong><br>拖放问题。使用画布上的右键单击弹出菜单作为变通方法。</p><p>查看<a href="http://jira.pentaho.com/" target="_blank" rel="noopener">http://jira.pentaho.com</a>上的跟踪器列表，以获取有关最近发现的问题的最新信息。</p><h2 id="用户界面概述"><a href="#用户界面概述" class="headerlink" title="用户界面概述"></a>用户界面概述</h2><p>Spoon左上方面板中的主树允许您浏览与已打开的作业和转换相关联的连接。在设计转换时，左下方面板中的核心对象包含用于构建转换的可用步骤，包括输入，输出，查找，转换，连接，脚本步骤等。设计作业时，核心对象的上下文包含可用的作业条目。核心对象栏包含各种作业条目类型。以下章节将详细介绍这些项目：03数据库连接，06 Hops，09转换步骤，11作业条目，12图形视图。</p><h2 id="命令行选项"><a href="#命令行选项" class="headerlink" title="命令行选项"></a>命令行选项</h2><p>以下是启动Spoon应用程序时可以使用的命令行选项：</p><p><strong>-file=<filename></filename></strong></p><p>运行指定的转换或作业</p><p>默认值：上次打开的文件</p><ul><li><strong>.ktr</strong>：Kettle Transformation</li><li><strong>.kjb</strong>：Kettle Job</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-file=transform.ktr</span><br></pre></td></tr></table></figure><p><strong>-logfile = <logging filename=""></logging></strong></p><p>指定日志文件的位置。</p><p>默认值：标准输出。 </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-logfile=log_file.txt</span><br></pre></td></tr></table></figure><p><strong>-level = <logging level=""></logging></strong>设置正在运行的转换的日志级别。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-level=Basic</span><br></pre></td></tr></table></figure><p>以下是可能的值：</p><table><thead><tr><th>Nothing</th><th>不显示任何输出</th></tr></thead><tbody><tr><td>Error</td><td>仅显示错误</td></tr><tr><td>Minimal</td><td>使用最少的日志</td></tr><tr><td>Basic</td><td>这是默认的基本日志记录级别</td></tr><tr><td>Detailed</td><td>提供详细的日志输出</td></tr><tr><td>Debug</td><td>显示详细输出以进行调试。</td></tr><tr><td>Rowlevel</td><td>行级详细记录。警告 - 这会生成大量数据。</td></tr></tbody></table><p><strong>-rep=<repository name=""> -user=<username> -pass=<password> -trans=<transname></transname></password></username></repository></strong></p><p><strong>-rep=<repository name=""> -user=<username> -pass=<password> -job=<jobname></jobname></password></username></repository></strong> </p><p>启动时自动从资源库加载转换或作业。 </p><blockquote><p>您必须指定选项 <strong>-user</strong>, <strong>-pass</strong> , <strong>-job</strong> and<em>-trans</em>。</p><p>资源库详细信息从本地目录或Kettle目录中的文件<strong>repositories.xml</strong>加载：</p></blockquote><ul><li>$HOME/.kettle/</li><li>C:\Documents and Settings\<username>.kettle on Windows.</username></li></ul><p>默认值：对话框将询问资源库详细信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rep=repos -user=admin -pass=adminpasswd -trans=trans.ktr</span><br></pre></td></tr></table></figure><blockquote><p>* 重要*：</p><ol><li>在Windows上，Pentaho建议您使用<strong>/ option：value</strong>格式来避免MS-DOS shell的命令行解析问题。</li><li>斜体字段表示选项使用的值。</li><li>如果选项值中有空格，请使用引号或双引号; 引号确保选项值保持在一起。</li></ol></blockquote><h2 id="资源库"><a href="#资源库" class="headerlink" title="资源库"></a>资源库</h2><p>Spoon允许您将转换和作业文件资源到本地文件系统或Kettle资源库中。Kettle资源库可以存放在任何常见的关系数据库中。要从数据库资源库加载转换，您必须连接到此资源库。启动Spoon时定义与资源库的数据库连接，如下所示：</p><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/3.jpg" alt=""></p><p>与资源库关联的信息存储在“repositories.xml”中。此文件位于默认主目录中的隐藏目录“.kettle”中。在Windows上，该文件位于C：\ Documents 和 Settings \ .kettle中</p><blockquote><p><strong>注意</strong>：与repositories.xml文件关联的完整路径和文件名将显示在Spoon控制台上。<br>如果每次启动Spoon时都不想显示“欢迎”对话框，请<strong>在启动时</strong>禁用“显示<strong>此对话框”</strong>或使用“编辑/选项”菜单下的“选项”对话框。</p></blockquote><blockquote><p><strong>注意</strong>：管理员的默认密码是 <strong>admin</strong>。Pentaho强烈建议您使用资源库资源管理器或<strong>资源库/编辑用户</strong>菜单更改此默认密码。</p></blockquote><h3 id="资源库自动登录"><a href="#资源库自动登录" class="headerlink" title="资源库自动登录"></a>资源库自动登录</h3><p>您可以通过设置以下环境变量让Spoon自动登录到资源库：KETTLE_REPOSITORY，KETTLE_USER和KETTLE_PASSWORD。</p><blockquote><p><img src="https://wiki.pentaho.com/s/zh_CN/7901/0b59262db6a7cd3dbeee6d1b1416b77c01706b36/_/images/icons/emoticons/warning.svg" alt="(警告)"> <strong>重要提示</strong>：由于日志记录会自动带来安全风险，Pentaho强烈建议您始终锁定计算机以防止未经授权访问资源库。</p></blockquote><h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><p>从版本2.2.0开始，Kettle根据LGPL许可证发布到公共域。有关本许可证的全文，请参阅附录A.</p><blockquote><p><strong>注意</strong>：Pentaho Data Integration在下面被称为“Kettle”。</p></blockquote><p>版权所有（C）2006 Pentaho Corporation</p><p>Kettle是免费软件; 您可以根据自由软件基金会发布的GNU宽通用公共许可证条款重新分发和/或修改它; 许可证的2.1版本，或（根据您的选择）任何更高版本。</p><p>Kettle的分配是希望它有用，但没有任何保证; 甚至没有适销性或特定用途适用性的暗示保证。有关更多详细信息，请参阅GNU宽通用公共许可证。</p><p>您应该已收到GNU宽通用公共许可证的副本以及Kettle分配; 如果没有，请写信给Free Software Foundation，Inc.，51 Franklin St，Fifth Floor，Boston，MA 02110-1301 USA</p><h2 id="转换定义"><a href="#转换定义" class="headerlink" title="转换定义"></a>转换定义</h2><p>下表包含转换定义列表：</p><table><thead><tr><th style="text-align:left">转换</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">Value</td><td style="text-align:left">值是行的一部分，可以包含任何类型的数据：字符串，浮点数，无限精度BigNumbers，整数，日期或布尔值</td></tr><tr><td style="text-align:left">Row</td><td style="text-align:left">一行由0个或多个值组成，这些值作为单个条目一起处理。</td></tr><tr><td style="text-align:left">Input Stream</td><td style="text-align:left">进入步骤的一堆行</td></tr><tr><td style="text-align:left">hop</td><td style="text-align:left">两个步骤之间的一个或多个数据流的图形表示; 一个跃点始终表示一步的输出流，另一个表示输入流 - 流的数量等于目标步骤的副本（一个或多个）</td></tr><tr><td style="text-align:left">note</td><td style="text-align:left">可以添加到转换的描述性文本</td></tr></tbody></table><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/4.jpg" alt=""></p><h2 id="作业定义"><a href="#作业定义" class="headerlink" title="作业定义"></a>作业定义</h2><p>下表包含作业定义列表：</p><table><thead><tr><th style="text-align:left">工作</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">Job Entry</td><td style="text-align:left">执行特定任务的作业的一部分</td></tr><tr><td style="text-align:left">Hop</td><td style="text-align:left">两个步骤之间的一个或多个数据流的图形表示; 一个跃点始终表示一步的输出流，另一个表示输入流 - 流的数量等于目标步骤的副本（一个或多个）</td></tr><tr><td style="text-align:left">Note</td><td style="text-align:left">可以添加到作业的描述性文本</td></tr></tbody></table><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/5.jpg" alt=""></p><h2 id="工具栏图标"><a href="#工具栏图标" class="headerlink" title="工具栏图标"></a>工具栏图标</h2><p>主屏幕工具栏上的图标从左到右：</p><table><thead><tr><th style="text-align:left">图标</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/6.png?version=1&amp;modificationDate=1210851682000&amp;api=v2" alt="img"></td><td style="text-align:left">创建新作业或转换</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/7.png?version=1&amp;modificationDate=1210852033000&amp;api=v2" alt="img"></td><td style="text-align:left">如果未连接到资源库，则从文件打开转换/作业;如果连接到资源库，则从资源库打开转换/作业。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/8.png?version=1&amp;modificationDate=1210852038000&amp;api=v2" alt="img"></td><td style="text-align:left">将转换/作业保存到文件或资源库。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/9.png?version=1&amp;modificationDate=1210852042000&amp;api=v2" alt="img"></td><td style="text-align:left">使用不同的名称或文件名保存转换/作业。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/10.png?version=1&amp;modificationDate=1210852046000&amp;api=v2" alt="img"></td><td style="text-align:left">打开打印对话框。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/11.png?version=1&amp;modificationDate=1210852050000&amp;api=v2" alt="img"></td><td style="text-align:left">运行转换/作业：从XML文件或资源库运行当前转换。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/12.png?version=1&amp;modificationDate=1210852055000&amp;api=v2" alt="img"></td><td style="text-align:left">预览转换：从内存运行当前转换。您可以预览由选定步骤生成的行。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/13.png?version=1&amp;modificationDate=1210852059000&amp;api=v2" alt="img"></td><td style="text-align:left">在调试模式下运行转换，允许您解决执行错误。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/14.png?version=1&amp;modificationDate=1210852063000&amp;api=v2" alt="img"></td><td style="text-align:left">重播特定日期和时间的转换处理。这将导致某些步骤（文本文件输入和Excel输入）仅处理在特定日期和时间运行期间无法正确解释的行。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/15.png?version=1&amp;modificationDate=1210852071000&amp;api=v2" alt="img"></td><td style="text-align:left">验证转换：Spoon为每个步骤运行一系列检查，以查看是否所有内容都将按预期运行。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/16.png?version=1&amp;modificationDate=1210852076000&amp;api=v2" alt="img"></td><td style="text-align:left">运行影响分析：转换对使用的数据库有何影响。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/17.png?version=1&amp;modificationDate=1210852082000&amp;api=v2" alt="img"></td><td style="text-align:left">生成运行加载的转换所需的SQL。</td></tr><tr><td style="text-align:left"><img src="https://wiki.pentaho.com/download/attachments/7700806/18.png?version=1&amp;modificationDate=1210852087000&amp;api=v2" alt="img"></td><td style="text-align:left">启动数据库资源管理器，允许您预览数据，运行SQL查询，生成DDL等。</td></tr></tbody></table><h2 id="Spoon选项"><a href="#Spoon选项" class="headerlink" title="Spoon选项"></a>Spoon选项</h2><p>Kettle选项允许您自定义与图形用户界面的行为和外观相关的属性。示例包括启动选项，例如是否显示提示和Kettle欢迎页面，以及用户界面选项（如字体和颜色）。要访问选项对话框，请从菜单栏中选择“ <strong>编辑”</strong>，然后<strong>选择“选项…</strong> ”。</p><h3 id="常规选项卡"><a href="#常规选项卡" class="headerlink" title="常规选项卡"></a>常规选项卡</h3><table><thead><tr><th style="text-align:left">特征</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">最大撤消级别</td><td style="text-align:left">设置Spoon可以撤消（或重做）的最大步数</td></tr><tr><td style="text-align:left">预览对话框中的默认行数</td><td style="text-align:left">允许您更改转换预览期间从步骤请求的默认行数</td></tr><tr><td style="text-align:left">记录窗口中的最大行数nr</td><td style="text-align:left">指定要在日志记录窗口中显示的行的最大限制</td></tr><tr><td style="text-align:left">在启动时显示提示？</td><td style="text-align:left">设置启动时的提示显示</td></tr><tr><td style="text-align:left">在启动时显示欢迎页面？</td><td style="text-align:left">控制启动Spoon时是否显示“欢迎”页面</td></tr><tr><td style="text-align:left">使用数据库缓存？</td><td style="text-align:left">Spoon缓存存储在源数据库和目标数据库中的信息。在某些情况下，当您进行数据库更改时，缓存会导致错误的结果。为了防止错误，您可以完全禁用缓存，而不是每次都清除缓存。</td></tr></tbody></table><blockquote><p><strong>注意</strong>：当您向数据库连接启动DDL（数据定义语言）语句时，Spoon会自动清除数据库缓存; 但是，使用第三方工具时，可能需要手动清除数据库缓存。</p></blockquote><table><thead><tr><th style="text-align:left">特征</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">启动时打开最后一个文件？</td><td style="text-align:left">从XML或存储库自动加载您使用（打开或保存）的最后一个转换</td></tr><tr><td style="text-align:left">自动保存更改的文件？</td><td style="text-align:left">在运行之前自动保存已更改的转换</td></tr><tr><td style="text-align:left">只显示主树中的活动文件？</td><td style="text-align:left">通过仅显示当前活动的文件，减少左侧主树中的转换和作业项的数量</td></tr><tr><td style="text-align:left">仅将已使用的连接保存到XML？</td><td style="text-align:left">将转换的XML导出限制为该转换中使用的连接。这在交换样本转换时很有用，以避免包含所有已定义的连接。</td></tr><tr><td style="text-align:left">询问在打开/导入时替换现有连接？</td><td style="text-align:left">在导入期间替换现有数据库连接之前请求权限</td></tr><tr><td style="text-align:left">在打开/导入时替换现有连接？</td><td style="text-align:left">这是在没有显示对话框时采取的操作。<em>（见上一个选项）</em></td></tr><tr><td style="text-align:left">显示“保存”对话框？</td><td style="text-align:left">允许您关闭更改转换时收到的确认对话框</td></tr><tr><td style="text-align:left">自动拆分跳？</td><td style="text-align:left">关闭要分割跳跃时获得的确认对话框（另请参见7.4。拆分跳跃）</td></tr><tr><td style="text-align:left">显示“复制或分发”对话框？</td><td style="text-align:left">关闭将步骤链接到多个输出时出现的警告消息。此警告消息描述了处理多个输出的两个选项：<strong>分发行</strong> - 目标步骤轮流接收行（循环法）<strong>复制行</strong> - 所有行都发送到所有目标</td></tr><tr><td style="text-align:left">启动时显示存储库对话框？</td><td style="text-align:left">控制是否在启动时显示存储库对话框。</td></tr><tr><td style="text-align:left">退出时询问用户？</td><td style="text-align:left">控制在用户选择退出应用程序时是否显示确认对话框。</td></tr><tr><td style="text-align:left">清除自定义参数（步骤/插件）</td><td style="text-align:left">清除插件或步骤对话框中设置的所有参数和标志。</td></tr><tr><td style="text-align:left">显示工具提示？</td><td style="text-align:left">此选项控制是否显示主工具栏上按钮的工具提示。</td></tr></tbody></table><h3 id="外观和感受选项卡"><a href="#外观和感受选项卡" class="headerlink" title="外观和感受选项卡"></a>外观和感受选项卡</h3><table><thead><tr><th style="text-align:left">特征</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">固定宽度字体</td><td style="text-align:left">对话框，树，输入字段等中使用的字体</td></tr><tr><td style="text-align:left">工作区上的字体</td><td style="text-align:left">图形视图上使用的字体</td></tr><tr><td style="text-align:left">笔记字体</td><td style="text-align:left">在图形视图中显示的注释中使用的字体</td></tr><tr><td style="text-align:left">背景颜色</td><td style="text-align:left">设置Spoon中的背景颜色。它也会影响所有对话框</td></tr><tr><td style="text-align:left">工作区背景颜色</td><td style="text-align:left">在Spoon的图形视图中设置背景颜色</td></tr><tr><td style="text-align:left">标签颜色</td><td style="text-align:left">用于指示活动/选定选项卡的颜色。</td></tr><tr><td style="text-align:left">工作区中的图标大小</td><td style="text-align:left">影响图形窗口中图标的大小。图标的原始大小为32x32像素。最好的结果（图形）可能是16,24,32,48,64和其他32的倍数。</td></tr><tr><td style="text-align:left">工作区上的线宽</td><td style="text-align:left">影响图形视图上的跃点的线宽和步骤周围的边框。</td></tr><tr><td style="text-align:left">工作区上的阴影大小</td><td style="text-align:left">如果此大小大于0，则在画布上绘制步骤，跃点和注释的阴影，使其看起来像转换浮动在画布上方。</td></tr><tr><td style="text-align:left">对话中间百分比</td><td style="text-align:left">默认情况下，参数以对话框宽度的35％绘制，从左侧开始计算。您可以使用此参数更改此设置。在使用异常大字体的情况下可能很有用。</td></tr><tr><td style="text-align:left">画布抗锯齿？</td><td style="text-align:left">Windows，OSX和Linux等平台通过GDI，Carbon或Cairo支持抗锯齿。选中此选项可在图表视图中启用更平滑的线条和图标。如果启用此选项并且之后环境不再起作用，请将文件$ HOME / .kettle / .spoonrc中的选项“EnableAntiAliasing”的值更改为“N”（C：\ Documents and Settings \ <user> \。 Windows上的水壶\ .spoonrc）</user></td></tr><tr><td style="text-align:left">使用OS的外观？</td><td style="text-align:left">在Windows上进行检查可以使用Spoon中字体和颜色的默认系统设置。在其他平台上，情况总是如此。</td></tr><tr><td style="text-align:left">显示品牌图形</td><td style="text-align:left">启用此选项将在画布上和左侧“展开栏”中绘制Pentaho Data Integration品牌图形。</td></tr><tr><td style="text-align:left">首选语言</td><td style="text-align:left">您可以在此处指定默认语言设置。如果某个文本尚未转换为此语言环境，则Kettle将回退到故障转移语言环境。</td></tr><tr><td style="text-align:left">替代语言</td><td style="text-align:left">由于编写Kettle的原始语言是英语，因此最好将此语言环境设置为英语。</td></tr></tbody></table><h2 id="搜索元数据"><a href="#搜索元数据" class="headerlink" title="搜索元数据"></a>搜索元数据</h2><p>此选项将搜索所有已加载作业的任何可用字段，连接器或注释以及“过滤器”字段中指定的字符串的转换。元数据搜索返回详细的结果集，显示任何搜索命中的位置。通过从菜单栏中选择“编辑”|“搜索元数据”可访问此功能。</p><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><p>“设置环境变量”功能允许您显式创建和设置当前用户会话的环境变量。在设计用于测试通常由另一个作业或转换动态设置的变量替换的转换时，这是一个有用的功能。</p><p>通过从菜单栏中选择“编辑”|“设置环境变量”，可以访问此功能。</p><blockquote><p><strong>注意</strong>：运行使用未定义变量的转换时，也会显示此页面。这允许您在执行时间之前定义它们。</p></blockquote><h4 id="显示环境变量"><a href="#显示环境变量" class="headerlink" title="显示环境变量"></a>显示环境变量</h4><p>此功能显示当前环境变量列表及其值。可以通过从菜单栏中选择“编辑”|“显示环境变量”选项来访问它。</p><h2 id="执行日志历史记录"><a href="#执行日志历史记录" class="headerlink" title="执行日志历史记录"></a>执行日志历史记录</h2><p>如果已将作业或转换配置为在数据库表中存储日志信息，则可以通过右键单击主树中的作业或转换并选择“打开历史记录视图”来查看先前执行的日志信息。出现类似于下面的视图：</p><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/23.png" alt=""></p><blockquote><p><strong>注意</strong>：todo：修复PDI-224时的屏幕截图</p></blockquote><blockquote><p><strong>注意</strong>：下次执行文件时，默认情况下也会打开作业或转换的日志历史记录。</p></blockquote><h2 id="重新执行"><a href="#重新执行" class="headerlink" title="重新执行"></a>重新执行</h2><p>重新执行功能允许您重新运行失败的转换。为文本文件输入和Excel输入实现了重放功能。它允许您将有错误的文件发送回源并更正数据。如果存在.line文件，则仅在重放期间处理之前失败的行。重新执行功能使用.line文件的文件名中的日期来匹配输入的重播日期。</p><h2 id="生成针对目标步骤的映射"><a href="#生成针对目标步骤的映射" class="headerlink" title="生成针对目标步骤的映射"></a>生成针对目标步骤的映射</h2><p>如果您有固定的目标表，请将流中的字段映射到目标输出表中的相应字段。在转换中使用“选择值”步骤。“生成目标映射”选项为您提供了一个易于使用的对话框，用于定义这些映射，自动创建生成的“选择值”步骤，该步骤可以在表输出步骤之前放入转换流中。</p><p>要访问“针对目标生成映射”选项，请右键单击表输出步骤。</p><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/25.png" alt=""></p><p>定义映射后，选择“确定”，包含映射的“选择值”步骤将显示在工作区中。在表输出步骤之前将映射步骤附加到转换中。</p><h3 id="生成映射示例"><a href="#生成映射示例" class="headerlink" title="生成映射示例"></a>生成映射示例</h3><p>下面是一个简单转换的示例，我们希望在其中生成到目标输出表的映射：</p><ol><li>首先右键单击Table输出步骤，然后选择“Generate mappings against target”。<br><img src="/2019/03/12/Spoon用户指南：01Spoon简介/26.png" alt=""></li><li>使用上面显示的Generate Mapping对话框添加所有必需的映射，然后单击OK。您现在将看到一个表输出映射步骤已添加到画布中。<br><img src="/2019/03/12/Spoon用户指南：01Spoon简介/27.png" alt=""></li><li>在表输出步骤之前将生成的表输出映射步骤拖到转换流中：<br><img src="/2019/03/12/Spoon用户指南：01Spoon简介/28.png" alt=""></li></ol><h2 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h2><p>在混合来自多个源的行时使用安全模式，以确保所有行在所有条件下都具有相同的布局。Spoon日志记录窗口或“执行转换/作业”窗口中提供了安全模式选项。在安全模式下运行时，转换会检查通过的每一行并确保所有布局都相同。如果行与第一行的布局不同，则会生成并报告错误。</p><blockquote><p><strong>注意</strong>：Pan中也提供此选项。</p></blockquote><h2 id="欢迎页面"><a href="#欢迎页面" class="headerlink" title="欢迎页面"></a>欢迎页面</h2><p>欢迎页面显示您第一次启动Spoon 3.0; 它为您提供有关Pentaho数据集成的其他信息的链接。您可以通过从<strong>编辑</strong>菜单中选择<strong>选项</strong>来禁用Spoon选项中的欢迎页面。</p><p><img src="/2019/03/12/Spoon用户指南：01Spoon简介/29.png" alt="img"></p><p><em>以上。</em></p><p>——本文译自<em>Pentaho Data Integration (aka Kettle)</em>官网文档<a href="https://wiki.pentaho.com/display/EAI/.01+Introduction+to+Spoon" target="_blank" rel="noopener">.01 Introduction to Spoon</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="kettle" scheme="https://ebichu3.github.io/tags/kettle/"/>
    
      <category term="DOCUMENT" scheme="https://ebichu3.github.io/tags/DOCUMENT/"/>
    
  </entry>
  
  <entry>
    <title>kettle基础教程（二）开始你的第一个kettle例子吧</title>
    <link href="https://ebichu3.github.io/2019/03/10/kettle%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%80%E5%A7%8B%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAkettle%E4%BE%8B%E5%AD%90%E5%90%A7/"/>
    <id>https://ebichu3.github.io/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/</id>
    <published>2019-03-10T10:11:00.000Z</published>
    <updated>2019-07-02T07:42:28.572Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h2><p>通过上篇文章已经安装好kettle了吧（如果有问题和意见欢迎评论提问交流）。我认为学习一个工具，最好的方式就是直接上手去做，遇到问题解决问题，过程中再通过看官方文档等方式进行知识的补充。接下来我们将通过一系列例子来进行kettle的学习，同时本博客也会陆续提供官方文档的中文翻译和个人解读。</p><p>本文将使用kettle实现一个同构数据从MySQL数据迁移到Oracle数据库的例子，通过这个简单的例子你将会学习到以下几点</p><ul><li>kettle的基本操作</li><li>表输入、表输出等转换组件的用法</li></ul><h2 id="示例过程"><a href="#示例过程" class="headerlink" title="示例过程"></a>示例过程</h2><p>双击运行Spoon.bat文件，出现欢迎界面。点击左上角“新建”按钮，图标如下图所示。</p><p><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/2.png" alt=""></p><p>你会看到有两种文件可供选择，Kettle可以生成两种文件：作业和转换。</p><ul><li>转换完成数据ETL工作</li><li>作业控制完成整个工作流。</li></ul><p>单击按钮，新建一个转换。从左侧核心对象中的“输入”“输出”中分别找出“表输入”“表输出”组件，鼠标单击拖到右边工作面板。按住shift点击“表输入”，再点击“表输出”就可以把两个组件连起来了。箭头代表数据流向。</p><p><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/3.png" alt=""></p><p>双击“表输入”，进入组件编辑。<br><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/4.png" alt=""><br>第一次建立数据库连接需点击新建。SQL就按你的需求写就行，全部写完点击确定即可。<br><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/5.png" alt=""><br>按实际情况填入，数据表空间和索引表空间不用填，建议点击测试测一下是否连接成功。<br>注意: Oracle数据库连接中数据库名称需填写SID。<br>同样双击“表输出”。<br><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/6.png" alt=""><br>选择数据库连接，你也可以新建一个。<br>介绍一下各项的含义:<br>目标模式：数据库连接下的其他模式或者说用户。<br>目标表: 输出到哪张表。<br>提交记录数：kettle每多少条输出到表一次。<br>裁剪表: 勾选上就每次输出前都会truncate该表再输出。<br>指定数据库字段：勾选上就要使用下面的数据库字段页签，制定kettle数据流字段和输出表字段的映射关系。<br>全部写完点击确定即可。<br><img src="/2019/03/10/kettle基础教程（二）开始你的第一个kettle例子吧/7.png" alt=""><br>点击图中三角号就可以运行了。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>数据库连接中Oracle数据库连接中数据库名称需填写SID，而不是servicename</li><li>建立数据库连接后，会出现在左侧菜单——DB连接中。选中后右键点击“共享”，在之后的使用中就可以不用再填写信息，直接选择该连接即可。</li></ul><p><em>以上。</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="ETL" scheme="https://ebichu3.github.io/tags/ETL/"/>
    
      <category term="kettle" scheme="https://ebichu3.github.io/tags/kettle/"/>
    
  </entry>
  
  <entry>
    <title>kettle基础教程（一）简要介绍与安装部署</title>
    <link href="https://ebichu3.github.io/2019/03/08/kettle%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E7%AE%80%E8%A6%81%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"/>
    <id>https://ebichu3.github.io/2019/03/08/kettle基础教程（一）简要介绍与安装部署/</id>
    <published>2019-03-08T05:11:00.000Z</published>
    <updated>2019-07-02T06:27:53.889Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h2><p>Pentaho Data Integration（PDI，也称为<em>Kettle</em>）是Pentaho的组件，负责提取，转换和加载（ETL）过程。虽然ETL工具最常用于数据仓库环境，但PDI也可用于其他目的：</p><ul><li>在应用程序或数据库之间迁移数据</li><li>将数据从数据库导出到平面文件</li><li>将数据大量加载到数据库中</li><li>数据清理</li><li>集成应用程序</li></ul><p><em>Kettle</em>易于使用。每个进程都使用图形工具创建，可以在其中指定要执行的操作，而无需编写代码来指示如何执行操作; 因此可以说<em>Kettle</em>是<em>面向元数据的</em>。</p><p><em>Kettle</em>可以用作独立应用程序，也可以用作较大的Pentaho Suite的一部分。作为ETL工具，它是最流行的开源工具。<em>Kettle</em>支持大量输入和输出格式，包括文本文件，数据表以及商业和免费数据库引擎。此外，<em>Kettle</em>的转换功能允许用户在极少数限制的情况下操作数据。</p><h2 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><blockquote><p><a href="https://sourceforge.net/projects/pentaho/" target="_blank" rel="noopener">https://sourceforge.net/projects/pentaho/</a><br>我下载的是pdi-ce-7.0.0.0-25，所以示例都是根据此版本。</p><p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a>  </p><p>JDK下载地址</p></blockquote><table><thead><tr><th>PDI Versions</th><th>5.1</th><th>5.2/5.3/5.4</th><th>6.0/6.1</th><th>7.0/7.1/8.0/8.1</th></tr></thead><tbody><tr><td>Java Versions</td><td>7</td><td>6（build targets）/7</td><td>7/8</td><td>8</td></tr></tbody></table><p>Kettle是由Java编写的免安装软件，运行该软件前需安装jdk，请注意版本适应。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><h5 id="设置Java环境变量"><a href="#设置Java环境变量" class="headerlink" title="设置Java环境变量"></a>设置Java环境变量</h5><p>网上很多教程，本文不再赘述。</p><h5 id="安装kettle"><a href="#安装kettle" class="headerlink" title="安装kettle"></a>安装kettle</h5><p>kettle不需要安装，只需将zip文件解压缩，进入<em>data-integration</em>文件夹，双击运行Spoon.bat文件即可使用kettle图形用户界面。为了方便使用，建议创建Spoon.bat文件桌面快捷方式，图标使用spoon.ico。<br><img src="/2019/03/08/kettle基础教程（一）简要介绍与安装部署/1.png" alt=""></p><p>安装成功出现以下界面</p><p><img src="/2019/03/08/kettle基础教程（一）简要介绍与安装部署/2.png" alt=""></p><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><h5 id="安装jdk并设置环境变量"><a href="#安装jdk并设置环境变量" class="headerlink" title="安装jdk并设置环境变量"></a>安装jdk并设置环境变量</h5><p>网上很多教程，本文不再赘述。</p><h5 id="安装kettle-1"><a href="#安装kettle-1" class="headerlink" title="安装kettle"></a>安装kettle</h5><p>创建一个目录，将下载好的kettle解压后放在该文件夹下。</p><pre><code>#mkdir  /root/software/kettle#cp  /root/pdi-ce-7.0.0.0-25.zip  /root/software/kettle#cd   /root/software/kettle#unzip pdi-ce-7.0.0.0-25.zip#cd  data-integration #ll  *.sh#chmod  +x  *.sh  //赋予.sh结尾的文件必须拥有执行权限</code></pre><p>测试安装是否成功</p><p>在kettle的data-integration目录中执行kitchen.sh文件。</p><pre><code>#./kitchen.sh //执行作业#./pan.sh //执行转换</code></pre><p>安装成功出现帮助信息界面</p><p><img src="/2019/03/08/kettle基础教程（一）简要介绍与安装部署/3.png" alt=""></p><p><em>以上。</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="ETL" scheme="https://ebichu3.github.io/tags/ETL/"/>
    
      <category term="kettle" scheme="https://ebichu3.github.io/tags/kettle/"/>
    
  </entry>
  
</feed>
